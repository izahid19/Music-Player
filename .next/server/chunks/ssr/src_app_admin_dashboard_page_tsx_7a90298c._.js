module.exports=[2868,a=>{"use strict";var b=a.i(56715),c=a.i(86339),d=a.i(88492),e=a.i(55787),f=a.i(45714);let g=[{id:"music-1",url:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=400&fit=crop",name:"Concert Stage"},{id:"music-2",url:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=400&h=400&fit=crop",name:"Piano Keys"},{id:"music-3",url:"https://images.unsplash.com/photo-1598488035139-bdbb2231ce04?w=400&h=400&fit=crop",name:"Vinyl Record"},{id:"music-4",url:"https://images.unsplash.com/photo-1501612780327-45045538702b?w=400&h=400&fit=crop",name:"Concert Crowd"},{id:"music-5",url:"https://images.unsplash.com/photo-1506157786151-b8491531f063?w=400&h=400&fit=crop",name:"Festival"},{id:"music-6",url:"https://images.unsplash.com/photo-1415201364774-f6f0bb35f28f?w=400&h=400&fit=crop",name:"Headphones"},{id:"music-7",url:"https://images.unsplash.com/photo-1571330735066-03aaa9429d89?w=400&h=400&fit=crop",name:"Neon Music"},{id:"music-8",url:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=400&h=400&fit=crop",name:"DJ Mixer"},{id:"music-9",url:"https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=400&h=400&fit=crop",name:"Microphone"},{id:"music-10",url:"https://images.unsplash.com/photo-1459749411175-04bf5292ceea?w=400&h=400&fit=crop",name:"Studio"}],h={name:"",artist:"",cover:"",audio:"",color:["#667eea","#764ba2"]};function i(){let a=(0,d.useRouter)(),[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)({page:1,limit:10,total:0,totalPages:0}),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(h),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(0),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)("default"),[I,J]=(0,c.useState)(!1),K=(0,c.useRef)(null),L=(0,c.useRef)(null),[M,N]=(0,c.useState)(()=>"light");(0,c.useEffect)(()=>{document.body.setAttribute("data-theme",M),localStorage.setItem("musicPlayerTheme",M)},[M]);let O=(0,c.useCallback)(async(a=1,b="")=>{n(!0);try{let c=new URLSearchParams({page:a.toString(),limit:"10"});b&&c.append("search",b);let d=await fetch(`/api/songs?${c}`);if(!d.ok)throw Error("Failed to fetch songs");let e=await d.json();j(e.songs||[]),l(e.pagination||{page:1,limit:10,total:0,totalPages:0})}catch(a){B("Failed to load songs")}finally{n(!1)}},[]);(0,c.useEffect)(()=>{O(k.page,C)},[]);let P=a=>{a>=1&&a<=k.totalPages&&O(a,C)},Q=async()=>{document.cookie="admin_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",a.push("/admin/login")},R=async a=>{let b=a.target.files?.[0];if(!b)return;v(!0),x(0),B("");let c=new FormData;c.append("file",b),c.append("type","audio");let d=new XMLHttpRequest;d.upload.addEventListener("progress",a=>{a.lengthComputable&&x(Math.round(a.loaded/a.total*100))}),d.addEventListener("load",()=>{if(d.status>=200&&d.status<300)try{let a=JSON.parse(d.responseText);t(b=>({...b,audio:a.url}))}catch{B("Invalid response from server")}else try{let a=JSON.parse(d.responseText);B(a.error||"Upload failed")}catch{B("Upload failed")}v(!1),x(0)}),d.addEventListener("error",()=>{B("Upload failed - network error"),v(!1),x(0)}),d.open("POST","/api/upload"),d.send(c)},S=async a=>{a.preventDefault(),z(!0),B("");try{let a=q?`/api/songs/${q}`:"/api/songs",b=await fetch(a,{method:q?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!b.ok){let a=await b.json();throw Error(a.error||"Failed to save song")}await O(k.page,C),U()}catch(a){B(a.message)}finally{z(!1)}},T=async a=>{if(confirm("Are you sure you want to delete this song?"))try{let b=await fetch(`/api/songs/${a}`,{method:"DELETE"});if(!b.ok){let a=await b.json();throw Error(a.error||"Failed to delete song")}await O(k.page,C)}catch(a){B(a.message)}},U=()=>{p(!1),r(null),t(h),B(""),H("default"),J(!1)};return(0,b.jsxs)("div",{className:`admin-dashboard-new ${"dark"===M?"dark-theme":""}`,children:[(0,b.jsxs)("aside",{className:"sidebar",children:[(0,b.jsx)("div",{className:"sidebar-header",children:(0,b.jsxs)("div",{className:"sidebar-logo",children:[(0,b.jsx)("div",{className:"logo-icon",children:(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faMusic})}),(0,b.jsx)("span",{children:"Playly"})]})}),(0,b.jsx)("nav",{className:"sidebar-nav",children:(0,b.jsxs)("div",{className:"nav-section",children:[(0,b.jsx)("span",{className:"nav-label",children:"Menu"}),(0,b.jsxs)("a",{href:"#",className:"nav-item active",children:[(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faHome}),(0,b.jsx)("span",{children:"Overview"})]}),(0,b.jsxs)("a",{href:"#",className:"nav-item",children:[(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faCompactDisc}),(0,b.jsx)("span",{children:"Music Library"})]}),(0,b.jsxs)("a",{href:"#",className:"nav-item",children:[(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faUpload}),(0,b.jsx)("span",{children:"Upload"})]})]})}),(0,b.jsxs)("div",{className:"sidebar-footer",children:[(0,b.jsxs)("a",{href:"#",className:"nav-item",children:[(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faGear}),(0,b.jsx)("span",{children:"Settings"})]}),(0,b.jsxs)("button",{className:"theme-toggle",onClick:()=>{N(a=>"light"===a?"dark":"light")},children:[(0,b.jsx)(e.FontAwesomeIcon,{icon:"light"===M?f.faMoon:f.faSun}),(0,b.jsx)("span",{children:"light"===M?"Dark Mode":"Light Mode"})]})]})]}),(0,b.jsxs)("div",{className:"main-content",children:[(0,b.jsxs)("header",{className:"dashboard-header",children:[(0,b.jsxs)("div",{className:"header-title",children:[(0,b.jsx)("h1",{children:"Admin Dashboard"}),(0,b.jsx)("p",{children:"Manage your music library"})]}),(0,b.jsx)("div",{className:"header-actions",children:(0,b.jsxs)("button",{className:"logout-btn",onClick:Q,children:[(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faSignOutAlt}),(0,b.jsx)("span",{children:"Logout"})]})})]}),(0,b.jsxs)("main",{className:"page-content",children:[(0,b.jsxs)("div",{className:"stats-row",children:[(0,b.jsxs)("div",{className:"stat-card",children:[(0,b.jsx)("div",{className:"stat-icon",children:(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faMusic})}),(0,b.jsxs)("div",{className:"stat-info",children:[(0,b.jsx)("span",{className:"stat-value",children:k.total}),(0,b.jsx)("span",{className:"stat-label",children:"Total Songs"})]})]}),(0,b.jsxs)("div",{className:"stat-card",children:[(0,b.jsx)("div",{className:"stat-icon accent",children:(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faCompactDisc})}),(0,b.jsxs)("div",{className:"stat-info",children:[(0,b.jsx)("span",{className:"stat-value",children:k.total>0?"Active":"Empty"}),(0,b.jsx)("span",{className:"stat-label",children:"Library Status"})]})]})]}),(0,b.jsx)("div",{className:"quick-action",children:(0,b.jsxs)("button",{className:"add-song-btn",onClick:()=>p(!0),children:[(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faPlus}),(0,b.jsx)("span",{children:"Add New Song"})]})}),(0,b.jsxs)("div",{className:"table-section",children:[(0,b.jsxs)("div",{className:"table-header",children:[(0,b.jsx)("h3",{children:"Music Library"}),(0,b.jsxs)("div",{className:"table-controls",children:[(0,b.jsxs)("div",{className:"search-box",children:[(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faSearch}),(0,b.jsx)("input",{type:"text",placeholder:"Search songs or artists...",value:E,onChange:a=>{var b;F(b=a.target.value),L.current&&clearTimeout(L.current),L.current=setTimeout(()=>{D(b),O(1,b)},300)}})]}),(0,b.jsxs)("span",{className:"song-count",children:[k.total," songs"]})]})]}),m?(0,b.jsx)("div",{className:"loading",children:(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faSpinner,spin:!0,size:"2x"})}):0===i.length?(0,b.jsxs)("div",{className:"empty-state",children:[(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faMusic,size:"2x"}),(0,b.jsx)("h4",{children:C?"No songs found":"No songs yet"}),(0,b.jsx)("p",{children:C?"Try a different search term":'Click "Add New Song" to get started'})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"table-container",children:(0,b.jsxs)("table",{className:"songs-table",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"Song Name"}),(0,b.jsx)("th",{children:"Artist"}),(0,b.jsx)("th",{children:"Status"}),(0,b.jsx)("th",{children:"Action"})]})}),(0,b.jsx)("tbody",{children:i.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:"song-cell",children:[(0,b.jsx)("img",{src:a.cover,alt:a.name,className:"song-thumb"}),(0,b.jsx)("span",{children:a.name})]})}),(0,b.jsx)("td",{children:a.artist}),(0,b.jsx)("td",{children:(0,b.jsx)("span",{className:"status-badge active",children:"Active"})}),(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:"action-btns",children:[(0,b.jsxs)("button",{className:"action-btn edit",onClick:()=>{r(a.id),t({name:a.name,artist:a.artist,cover:a.cover,audio:a.audio,color:a.color}),H(g.some(b=>b.url===a.cover)?"default":"url"),p(!0)},children:[(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faEdit})," Edit"]}),(0,b.jsxs)("button",{className:"action-btn delete",onClick:()=>T(a.id),children:[(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faTrash})," Delete"]})]})})]},a.id))})]})}),k.totalPages>1&&(0,b.jsxs)("div",{className:"pagination",children:[(0,b.jsx)("button",{className:"pagination-btn",onClick:()=>P(k.page-1),disabled:k.page<=1,children:(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faChevronLeft})}),(0,b.jsx)("div",{className:"pagination-info",children:(0,b.jsxs)("span",{children:["Page ",k.page," of ",k.totalPages]})}),(0,b.jsx)("button",{className:"pagination-btn",onClick:()=>P(k.page+1),disabled:k.page>=k.totalPages,children:(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faChevronRight})})]})]})]})]})]}),o&&(0,b.jsx)("div",{className:"modal-overlay",onClick:U,children:(0,b.jsxs)("div",{className:"modal",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"modal-header",children:[(0,b.jsx)("h2",{children:q?"Edit Song":"Add New Song"}),(0,b.jsx)("button",{className:"close-btn",onClick:U,children:(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faTimes})})]}),(0,b.jsxs)("div",{className:"modal-body",children:[A&&(0,b.jsx)("div",{className:"error-msg",children:A}),(0,b.jsxs)("form",{onSubmit:S,children:[(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{children:"Song Name"}),(0,b.jsx)("input",{type:"text",value:s.name,onChange:a=>t({...s,name:a.target.value}),placeholder:"Enter song name",required:!0})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{children:"Artist"}),(0,b.jsx)("input",{type:"text",value:s.artist,onChange:a=>t({...s,artist:a.target.value}),placeholder:"Enter artist name",required:!0})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{children:"Cover Image"}),(0,b.jsxs)("div",{className:"cover-tabs",children:[(0,b.jsxs)("button",{type:"button",className:`cover-tab ${"default"===G?"active":""}`,onClick:()=>H("default"),children:[(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faImage})," Default Images"]}),(0,b.jsxs)("button",{type:"button",className:`cover-tab ${"url"===G?"active":""}`,onClick:()=>H("url"),children:[(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faLink})," Image URL"]})]}),"url"===G?(0,b.jsx)("input",{type:"url",value:s.cover,onChange:a=>t({...s,cover:a.target.value}),placeholder:"https://...",required:"url"===G}):(0,b.jsxs)("div",{className:"cover-picker",children:[s.cover&&(0,b.jsxs)("div",{className:"selected-cover",children:[(0,b.jsx)("img",{src:s.cover,alt:"Selected cover"}),(0,b.jsx)("span",{children:"Selected"})]}),(0,b.jsx)("button",{type:"button",className:"choose-cover-btn",onClick:()=>J(!I),children:s.cover?"Change Image":"Choose Image"}),I&&(0,b.jsx)("div",{className:"cover-grid",children:g.map(a=>(0,b.jsxs)("div",{className:`cover-option ${s.cover===a.url?"selected":""}`,onClick:()=>{var b;return b=a.url,void(t(a=>({...a,cover:b})),J(!1))},children:[(0,b.jsx)("img",{src:a.url,alt:a.name}),s.cover===a.url&&(0,b.jsx)("div",{className:"cover-check",children:(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faCheck})})]},a.id))})]})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{children:"Audio File"}),(0,b.jsx)("input",{type:"file",ref:K,accept:"audio/*",onChange:R,style:{display:"none"}}),(0,b.jsx)("div",{className:`upload-area ${s.audio?"has-file":""} ${u?"uploading":""}`,onClick:()=>!u&&K.current?.click(),children:u?(0,b.jsxs)("div",{className:"upload-progress",children:[(0,b.jsx)("div",{className:"progress-bar",children:(0,b.jsx)("div",{className:"progress-fill",style:{width:`${w}%`}})}),(0,b.jsxs)("span",{children:["Uploading... ",w,"%"]})]}):s.audio?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faCheck})," Audio uploaded"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faUpload})," Click to upload audio"]})})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{children:"Theme Colors"}),(0,b.jsxs)("div",{className:"color-inputs",children:[(0,b.jsxs)("div",{className:"color-input",children:[(0,b.jsx)("input",{type:"color",value:s.color[0],onChange:a=>t({...s,color:[a.target.value,s.color[1]]})}),(0,b.jsx)("input",{type:"text",value:s.color[0],onChange:a=>t({...s,color:[a.target.value,s.color[1]]})})]}),(0,b.jsxs)("div",{className:"color-input",children:[(0,b.jsx)("input",{type:"color",value:s.color[1],onChange:a=>t({...s,color:[s.color[0],a.target.value]})}),(0,b.jsx)("input",{type:"text",value:s.color[1],onChange:a=>t({...s,color:[s.color[0],a.target.value]})})]})]})]}),(0,b.jsx)("button",{type:"submit",className:"submit-btn",disabled:y||u||"default"===G&&!s.cover,children:y?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faSpinner,spin:!0})," Saving..."]}):(0,b.jsx)(b.Fragment,{children:q?"Update Song":"Add Song"})})]})]})]})})]})}a.s(["default",()=>i],2868)}];

//# sourceMappingURL=src_app_admin_dashboard_page_tsx_7a90298c._.js.map