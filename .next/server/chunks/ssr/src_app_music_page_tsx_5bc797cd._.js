module.exports=[28198,a=>{"use strict";var b=a.i(56715),c=a.i(86339),d=a.i(77092),e=a.i(55787),f=a.i(45714);let g=({currentSong:a,isPlaying:c,setIsPlaying:g,audioRef:h,setSongInfo:i,songInfo:j,songs:k,setCurrentSong:l,setSongs:m,volume:n,setVolume:o,isMuted:p,setIsMuted:q,isShuffled:r,setIsShuffled:s,repeatMode:t,setRepeatMode:u,skipTrack:v,favorites:w,toggleFavorite:x})=>{let y=a=>{m(k.map(b=>b.id===a.id?{...b,active:!0}:{...b,active:!1})),c&&h.current.play()},z=a=>Math.floor(a/60)+":"+("0"+Math.floor(a%60)).slice(-2),A=async a=>{let b=k.findIndex(a=>a.active);if("skip-forward"===a&&(await l(k[(b+1)%k.length]),y(k[(b+1)%k.length])),"skip-back"===a){if((b-1)%k.length==-1){await l(k[k.length-1]),y(k[k.length-1]),c&&h.current.play();return}await l(k[(b-1)%k.length]),y(k[(b-1)%k.length])}c&&h.current.play()},B={transform:`translateX(${j.animationPercentage}%)`};return(0,b.jsxs)("div",{className:"player",children:[(0,b.jsxs)("div",{className:"time-control",children:[(0,b.jsx)("p",{children:z(j.currentTime)}),(0,b.jsxs)("div",{style:{background:`linear-gradient(to right, ${a.color[0]}, ${a.color[1]})`},className:"track",children:[(0,b.jsx)("input",{min:0,max:j.duration||0,value:j.currentTime,type:"range",onChange:a=>{h.current.currentTime=a.target.value,i({...j,currentTime:a.target.value})}}),(0,b.jsx)("div",{style:B,className:"animate-track"})]}),(0,b.jsx)("p",{children:j.duration?z(j.duration):"0:00"})]}),(0,b.jsxs)("div",{className:"play-control",children:[(0,b.jsx)(d.motion.span,{whileHover:{scale:1.15},whileTap:{scale:.9},children:(0,b.jsx)(e.FontAwesomeIcon,{onClick:()=>{s(!r)},className:`shuffle ${r?"active":""}`,icon:f.faShuffle,size:"lg",title:"Shuffle"})}),(0,b.jsx)(d.motion.span,{whileHover:{scale:1.15},whileTap:{scale:.9},children:(0,b.jsx)(e.FontAwesomeIcon,{onClick:()=>A("skip-back"),className:"skip-back",icon:f.faAngleLeft,size:"2x"})}),(0,b.jsx)(d.motion.span,{whileHover:{scale:1.1},whileTap:{scale:.95},children:(0,b.jsx)(e.FontAwesomeIcon,{onClick:()=>{c?h.current.pause():h.current.play(),g(!c)},className:"play",icon:c?f.faPause:f.faPlay,size:"2x"})}),(0,b.jsx)(d.motion.span,{whileHover:{scale:1.15},whileTap:{scale:.9},children:(0,b.jsx)(e.FontAwesomeIcon,{onClick:()=>A("skip-forward"),className:"skip-forward",icon:f.faAngleRight,size:"2x"})}),(0,b.jsxs)(d.motion.span,{whileHover:{scale:1.15},whileTap:{scale:.9},className:"repeat-btn",children:[(0,b.jsx)(e.FontAwesomeIcon,{onClick:()=>{let a=["off","all","one"],b=a.indexOf(t);u(a[(b+1)%a.length])},className:`repeat ${"off"!==t?"active":""}`,icon:f.faRepeat,size:"lg",title:"one"===t?"Repeat One":"all"===t?"Repeat All":"Repeat Off"}),"one"===t&&(0,b.jsx)("span",{className:"repeat-one-badge",children:"1"})]})]}),(0,b.jsxs)("div",{className:"volume-control",children:[(0,b.jsx)(d.motion.span,{whileHover:{scale:1.15},whileTap:{scale:.9},children:(0,b.jsx)(e.FontAwesomeIcon,{onClick:()=>{q(!p)},className:"volume-icon",icon:p||0===n?f.faVolumeXmark:f.faVolumeHigh,size:"lg",title:p?"Unmute":"Mute"})}),(0,b.jsx)("input",{type:"range",min:0,max:1,step:.01,value:p?0:n,onChange:a=>{let b=parseFloat(a.target.value);o(b),b>0&&p&&q(!1)},className:"volume-slider"}),(0,b.jsxs)("span",{className:"volume-percentage",children:[Math.round((p?0:n)*100),"%"]})]})]})};var h=a.i(10769),i=a.i(35225),j=a.i(69005),k=a.i(67988),l=a.i(47423),m=c,n=a.i(61188);function o(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}class p extends m.Component{getSnapshotBeforeUpdate(a){let b=this.props.childRef.current;if(b&&a.isPresent&&!this.props.isPresent){let a=b.offsetParent,c=(0,l.isHTMLElement)(a)&&a.offsetWidth||0,d=this.props.sizeRef.current;d.height=b.offsetHeight||0,d.width=b.offsetWidth||0,d.top=b.offsetTop,d.left=b.offsetLeft,d.right=c-d.width-d.left}return null}componentDidUpdate(){}render(){return this.props.children}}function q({children:a,isPresent:d,anchorX:e,root:f}){let g=(0,m.useId)(),h=(0,m.useRef)(null),i=(0,m.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:j}=(0,m.useContext)(n.MotionConfigContext),k=function(...a){return c.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=o(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():o(a[b],null)}}}}(...a),a)}(h,a?.ref);return(0,m.useInsertionEffect)(()=>{let{width:a,height:b,top:c,left:k,right:l}=i.current;if(d||!h.current||!a||!b)return;let m="left"===e?`left: ${k}`:`right: ${l}`;h.current.dataset.motionPopId=g;let n=document.createElement("style");j&&(n.nonce=j);let o=f??document.head;return o.appendChild(n),n.sheet&&n.sheet.insertRule(`
          [data-motion-pop-id="${g}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${b}px !important;
            ${m}px !important;
            top: ${c}px !important;
          }
        `),()=>{o.contains(n)&&o.removeChild(n)}},[d]),(0,b.jsx)(p,{isPresent:d,childRef:h,sizeRef:i,children:m.cloneElement(a,{ref:k})})}let r=({children:a,initial:d,isPresent:e,onExitComplete:f,custom:g,presenceAffectsLayout:h,mode:j,anchorX:l,root:m})=>{let n=(0,i.useConstant)(s),o=(0,c.useId)(),p=!0,r=(0,c.useMemo)(()=>(p=!1,{id:o,initial:d,isPresent:e,custom:g,onExitComplete:a=>{for(let b of(n.set(a,!0),n.values()))if(!b)return;f&&f()},register:a=>(n.set(a,!1),()=>n.delete(a))}),[e,n,f]);return h&&p&&(r={...r}),(0,c.useMemo)(()=>{n.forEach((a,b)=>n.set(b,!1))},[e]),c.useEffect(()=>{e||n.size||!f||f()},[e]),"popLayout"===j&&(a=(0,b.jsx)(q,{isPresent:e,anchorX:l,root:m,children:a})),(0,b.jsx)(k.PresenceContext.Provider,{value:r,children:a})};function s(){return new Map}var t=a.i(49351);let u=a=>a.key||"";function v(a){let b=[];return c.Children.forEach(a,a=>{(0,c.isValidElement)(a)&&b.push(a)}),b}let w=({children:a,custom:d,initial:e=!0,onExitComplete:f,presenceAffectsLayout:g=!0,mode:k="sync",propagate:l=!1,anchorX:m="left",root:n})=>{let[o,p]=(0,t.usePresence)(l),q=(0,c.useMemo)(()=>v(a),[a]),s=l&&!o?[]:q.map(u),w=(0,c.useRef)(!0),x=(0,c.useRef)(q),y=(0,i.useConstant)(()=>new Map),[z,A]=(0,c.useState)(q),[B,C]=(0,c.useState)(q);(0,j.useIsomorphicLayoutEffect)(()=>{w.current=!1,x.current=q;for(let a=0;a<B.length;a++){let b=u(B[a]);s.includes(b)?y.delete(b):!0!==y.get(b)&&y.set(b,!1)}},[B,s.length,s.join("-")]);let D=[];if(q!==z){let a=[...q];for(let b=0;b<B.length;b++){let c=B[b],d=u(c);s.includes(d)||(a.splice(b,0,c),D.push(c))}return"wait"===k&&D.length&&(a=D),C(v(a)),A(q),null}let{forceRender:E}=(0,c.useContext)(h.LayoutGroupContext);return(0,b.jsx)(b.Fragment,{children:B.map(a=>{let c=u(a),h=(!l||!!o)&&(q===B||s.includes(c));return(0,b.jsx)(r,{isPresent:h,initial:(!w.current||!!e)&&void 0,custom:d,presenceAffectsLayout:g,mode:k,root:n,onExitComplete:h?void 0:()=>{if(!y.has(c))return;y.set(c,!0);let a=!0;y.forEach(b=>{b||(a=!1)}),a&&(E?.(),C(x.current),l&&p?.(),f&&f())},anchorX:m,children:a},c)})})},x=({currentSong:a,isPlaying:c,favorites:g,toggleFavorite:h})=>{let i=g.includes(a.id);return(0,b.jsxs)("div",{className:"song-container",children:[(0,b.jsx)(w,{mode:"wait",children:(0,b.jsx)(d.motion.img,{className:c?"song-playing":"",src:a.cover,alt:a.name,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3}},a.id)}),(0,b.jsxs)("div",{className:"song-info",children:[(0,b.jsx)(w,{mode:"wait",children:(0,b.jsx)(d.motion.h2,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:a.name},a.id)}),(0,b.jsx)(d.motion.span,{whileHover:{scale:1.2},whileTap:{scale:.9},style:{display:"inline-flex"},children:(0,b.jsx)(e.FontAwesomeIcon,{onClick:()=>h(a.id),className:`favorite ${i?"active":""}`,icon:f.faHeart,size:"lg",title:"Like"})})]}),(0,b.jsx)(w,{mode:"wait",children:(0,b.jsx)(d.motion.h3,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:a.artist},a.id)})]})},y=({song:a,setCurrentSong:c,songs:g,audioRef:h,isPlaying:i,setIsPlaying:j,favorites:k,toggleFavorite:l})=>{let m=async()=>{await c(a),j(!0)},n=k.includes(a.id);return(0,b.jsxs)(d.motion.div,{onClick:m,className:`library-song ${a.active?"selected":""}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,b.jsx)("img",{src:a.cover,alt:a.name}),(0,b.jsxs)("div",{className:"song-description",children:[(0,b.jsx)("h3",{children:a.name}),(0,b.jsx)("h4",{children:a.artist})]}),(0,b.jsx)(d.motion.span,{whileHover:{scale:1.2},whileTap:{scale:.8},style:{display:"inline-flex",marginLeft:"auto"},children:(0,b.jsx)(e.FontAwesomeIcon,{onClick:b=>{b.stopPropagation(),l(a.id)},icon:f.faHeart,className:`favorite ${n?"active":""}`,style:{color:n?"#ef4444":"var(--text-secondary)",cursor:"pointer",fontSize:"1rem"}})})]})},z=({songs:a,setCurrentSong:g,audioRef:h,isPlaying:i,setSongs:j,libraryStatus:k,setLibraryStatus:l,setIsPlaying:m,favorites:n,toggleFavorite:o})=>{let[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(!1),t=a.filter(a=>{let b=a.name.toLowerCase().includes(p.toLowerCase())||a.artist.toLowerCase().includes(p.toLowerCase()),c=!r||n.includes(a.id);return b&&c});return(0,b.jsxs)("div",{className:`library ${k?"active-library":""}`,children:[(0,b.jsxs)("div",{className:"library-header",children:[(0,b.jsxs)("h2",{children:["Library ",(0,b.jsxs)("span",{className:"song-count",children:["(",a.length," songs)"]})]}),(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faTimes,onClick:()=>l(!1),className:"close-icon",style:{cursor:"pointer",padding:"2rem"}})]}),(0,b.jsxs)("div",{className:"search-container",children:[(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faSearch,className:"search-icon"}),(0,b.jsx)("input",{type:"text",placeholder:"Search songs & artists...",value:p,onChange:a=>q(a.target.value)}),(0,b.jsx)(d.motion.button,{className:`filter-btn ${r?"active":""}`,onClick:()=>s(!r),title:"Show Favorites",style:{background:"none",border:"none",cursor:"pointer",marginLeft:"0.5rem",color:r?"#ef4444":"var(--text-secondary)",fontSize:"1.2rem",transition:"all 0.3s ease"},whileHover:{scale:1.2},whileTap:{scale:.9},children:(0,b.jsx)(e.FontAwesomeIcon,{icon:f.faHeart})})]}),(0,b.jsx)("div",{className:"library-songs",children:t.length>0?t.map(c=>(0,b.jsx)(y,{song:c,setCurrentSong:g,songs:a,audioRef:h,isPlaying:i,setIsPlaying:m,favorites:n,toggleFavorite:o},c.id)):(0,b.jsx)("h3",{style:{textAlign:"center",padding:"2rem"},children:"No songs found"})})]})};var A=a.i(88729);a.s(["default",0,function(){let a=(0,c.useRef)(null),d=(0,c.useRef)(!0),e=(0,c.useRef)(!1),[f,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)({currentTime:0,duration:0,animationPercentage:0}),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(()=>.3),[w,y]=(0,c.useState)(!1),[B,C]=(0,c.useState)(()=>!1),[D,E]=(0,c.useState)(()=>"off"),[F,G]=(0,c.useState)(()=>"light"),[H,I]=(0,c.useState)(()=>[]);(0,c.useEffect)(()=>{e.current||(e.current=!0,(async()=>{try{let a=await fetch("/api/songs?all=true");if(!a.ok)throw Error("Failed to fetch songs");let b=await a.json(),c=b.songs||b;if(!c||0===c.length){n("No songs available. Add songs from the admin dashboard."),l(!1);return}let d=localStorage.getItem("musicPlayerSongId"),e=c.map((a,b)=>({...a,active:d?a.id===d:0===b}));h(e);let f=e.find(a=>a.active)||e[0];j(f)}catch(a){console.error("Error fetching songs:",a),n("Failed to load songs. Please try again later.")}finally{l(!1)}})())},[]),(0,c.useEffect)(()=>{localStorage.setItem("musicPlayerFavorites",JSON.stringify(H))},[H]),(0,c.useEffect)(()=>{document.body.setAttribute("data-theme",F),localStorage.setItem("musicPlayerTheme",F)},[F]);let J=a=>{H.includes(a)?I(H.filter(b=>b!==a)):I([...H,a])};(0,c.useEffect)(()=>{a.current&&(a.current.volume=w?0:u)},[u,w]),(0,c.useEffect)(()=>{localStorage.setItem("musicPlayerVolume",u.toString()),localStorage.setItem("musicPlayerShuffle",B.toString()),localStorage.setItem("musicPlayerRepeat",D)},[u,B,D]),(0,c.useEffect)(()=>{i?.id&&localStorage.setItem("musicPlayerSongId",i.id)},[i]),(0,c.useEffect)(()=>{let b,c=()=>{a.current&&!isNaN(a.current.currentTime)&&localStorage.setItem("musicPlayerPosition",a.current.currentTime.toString())};return o&&(b=setInterval(c,2e3)),()=>{b&&clearInterval(b),c()}},[o]),(0,c.useEffect)(()=>{if(o&&a.current){let b=a.current.play();void 0!==b&&b.catch(a=>{console.log("Playback error:",a)})}},[o,i]);let K=b=>{let c;if(!i)return;let d=f.findIndex(a=>a.id===i.id);if(B&&"forward"===b)for(c=Math.floor(Math.random()*f.length);c===d&&f.length>1;)c=Math.floor(Math.random()*f.length);else c="forward"===b?(d+1)%f.length:d-1<0?f.length-1:d-1;j(f[c]),o&&setTimeout(()=>{let b=a.current;b&&b.play().catch(a=>console.log("Playback error:",a))},100)};(0,c.useEffect)(()=>{let b=b=>{if("INPUT"!==b.target.tagName)switch(b.key){case" ":b.preventDefault(),o?a.current?.pause():a.current?.play(),p(!o);break;case"ArrowRight":b.preventDefault(),K("forward");break;case"ArrowLeft":b.preventDefault(),K("back");break;case"ArrowUp":b.preventDefault(),v(a=>Math.min(a+.1,1));break;case"ArrowDown":b.preventDefault(),v(a=>Math.max(a-.1,0));break;case"m":case"M":b.preventDefault(),y(!w)}};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[o,w,i,B]);let L=a=>{let b=a.target.currentTime,c=a.target.duration,d=Math.round(Math.round(b)/Math.round(c)*100);r({...q,currentTime:b,duration:c,animationPercentage:d})};(0,c.useEffect)(()=>{i&&h(a=>a.map(a=>({...a,active:a.id===i.id})))},[i]);let M=async()=>{let b;if(!a.current||!i)return;if("one"===D){a.current.currentTime=0,o&&a.current.play();return}let c=f.findIndex(a=>a.id===i.id);if(B)for(b=Math.floor(Math.random()*f.length);b===c&&f.length>1;)b=Math.floor(Math.random()*f.length);else{if("all"!==D&&!(c<f.length-1))return void p(!1);b=(c+1)%f.length}j(f[b]),o&&setTimeout(()=>a.current?.play(),100)};return k||m||!i?(0,b.jsx)("div",{className:"App",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"var(--bg-color)"},children:(0,b.jsx)("div",{style:{textAlign:"center",maxWidth:400,padding:20},children:k?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"loading-spinner",style:{width:50,height:50,border:"3px solid rgba(102, 126, 234, 0.2)",borderTop:"3px solid #667eea",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 20px"}}),(0,b.jsx)("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"}),(0,b.jsx)("p",{style:{color:"var(--text-color)"},children:"Loading music..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{style:{width:60,height:60,borderRadius:"50%",background:"rgba(102, 126, 234, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px",fontSize:24},children:"ðŸŽµ"}),(0,b.jsx)("p",{style:{color:"var(--text-color)",marginBottom:20},children:m||"No songs available"}),(0,b.jsx)("a",{href:"/admin/login",style:{display:"inline-block",padding:"12px 24px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",textDecoration:"none",borderRadius:8,fontWeight:500},children:"Go to Admin Dashboard"})]})})}):(0,b.jsxs)("div",{className:`App ${s?"library-active":""}`,children:[(0,b.jsxs)("div",{className:"ocean",style:{background:`${i.color[0]}`},children:[(0,b.jsx)("div",{className:"wave",style:{background:`${i.color[1]}`}}),(0,b.jsx)("div",{className:"wave",style:{background:`${i.color[1]}`}})]}),(0,b.jsx)(A.default,{libraryStatus:s,setLibraryStatus:t,theme:F,toggleTheme:()=>{G(a=>"light"===a?"dark":"light")}}),(0,b.jsx)(x,{currentSong:i,isPlaying:o,favorites:H,toggleFavorite:J}),(0,b.jsx)(g,{currentSong:i,isPlaying:o,setIsPlaying:p,audioRef:a,setSongInfo:r,songInfo:q,songs:f,setCurrentSong:j,setSongs:h,volume:u,setVolume:v,isMuted:w,setIsMuted:y,isShuffled:B,setIsShuffled:C,repeatMode:D,setRepeatMode:E,skipTrack:K,favorites:H,toggleFavorite:J}),(0,b.jsx)(z,{songs:f,setCurrentSong:j,audioRef:a,isPlaying:o,setSongs:h,libraryStatus:s,setLibraryStatus:t,setIsPlaying:p,favorites:H,toggleFavorite:J}),(0,b.jsx)("audio",{onTimeUpdate:L,onLoadedMetadata:b=>{if(L(b),d.current){let b=localStorage.getItem("musicPlayerPosition");if(b&&a.current){let c=parseFloat(b);isNaN(c)||(a.current.currentTime=c)}d.current=!1}},ref:a,src:i.audio,onEnded:M})]})}],28198)}];

//# sourceMappingURL=src_app_music_page_tsx_5bc797cd._.js.map