(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63589,(e,s,a)=>{s.exports=e.r(27611)},28030,e=>{"use strict";var s=e.i(64309),a=e.i(84544),t=e.i(24629),n=e.i(88610),o=e.i(63589),i=e.i(66033),c=e.i(441);let l=[{id:"music-1",url:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=400&fit=crop",name:"Concert Stage"},{id:"music-2",url:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=400&h=400&fit=crop",name:"Piano Keys"},{id:"music-3",url:"https://images.unsplash.com/photo-1598488035139-bdbb2231ce04?w=400&h=400&fit=crop",name:"Vinyl Record"},{id:"music-4",url:"https://images.unsplash.com/photo-1501612780327-45045538702b?w=400&h=400&fit=crop",name:"Concert Crowd"},{id:"music-5",url:"https://images.unsplash.com/photo-1506157786151-b8491531f063?w=400&h=400&fit=crop",name:"Festival"},{id:"music-6",url:"https://images.unsplash.com/photo-1415201364774-f6f0bb35f28f?w=400&h=400&fit=crop",name:"Headphones"},{id:"music-7",url:"https://images.unsplash.com/photo-1571330735066-03aaa9429d89?w=400&h=400&fit=crop",name:"Neon Music"},{id:"music-8",url:"https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=400&h=400&fit=crop",name:"DJ Mixer"},{id:"music-9",url:"https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=400&h=400&fit=crop",name:"Microphone"},{id:"music-10",url:"https://images.unsplash.com/photo-1459749411175-04bf5292ceea?w=400&h=400&fit=crop",name:"Studio"}],r={name:"",artist:"",cover:"",audio:"",color:["#667eea","#764ba2"]};function d(){let e=(0,o.useRouter)(),[d,h]=(0,n.useState)([]),[m,u]=(0,n.useState)({page:1,limit:10,total:0,totalPages:0}),[p,x]=(0,n.useState)(!0),[j,g]=(0,n.useState)(!1),[v,f]=(0,n.useState)(null),[N,b]=(0,n.useState)(r),[w,y]=(0,n.useState)(!1),[S,C]=(0,n.useState)(0),[A,F]=(0,n.useState)(!1),[k,I]=(0,n.useState)(""),[T,P]=(0,n.useState)(""),[_,E]=(0,n.useState)(""),[M,L]=(0,n.useState)("default"),[U,D]=(0,n.useState)(!1),R=(0,n.useRef)(null),O=(0,n.useRef)(null),[q,J]=(0,n.useState)(()=>localStorage.getItem("musicPlayerTheme")||"light");(0,n.useEffect)(()=>{document.body.setAttribute("data-theme",q),localStorage.setItem("musicPlayerTheme",q)},[q]);let H=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";x(!0);try{let a=new URLSearchParams({page:e.toString(),limit:"10"});s&&a.append("search",s);let t=await fetch("/api/songs?".concat(a));if(!t.ok)throw Error("Failed to fetch songs");let n=await t.json();h(n.songs||[]),u(n.pagination||{page:1,limit:10,total:0,totalPages:0})}catch(e){I("Failed to load songs")}finally{x(!1)}},[]);(0,n.useEffect)(()=>{H(m.page,T)},[]);let K=e=>{e>=1&&e<=m.totalPages&&H(e,T)},z=async()=>{document.cookie="admin_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",e.push("/admin/login")},B=async e=>{var t;let n=null==(t=e.target.files)?void 0:t[0];if(!n)return;y(!0),C(0),I("");let o=new FormData;o.append("file",n),o.append("type","audio");let i=new XMLHttpRequest;i.upload.addEventListener("progress",e=>{e.lengthComputable&&C(Math.round(e.loaded/e.total*100))}),i.addEventListener("load",()=>{if(i.status>=200&&i.status<300)try{let e=JSON.parse(i.responseText);b(t=>(0,a._)((0,s._)({},t),{audio:e.url}))}catch(e){I("Invalid response from server")}else try{let e=JSON.parse(i.responseText);I(e.error||"Upload failed")}catch(e){I("Upload failed")}y(!1),C(0)}),i.addEventListener("error",()=>{I("Upload failed - network error"),y(!1),C(0)}),i.open("POST","/api/upload"),i.send(o)},G=async e=>{e.preventDefault(),F(!0),I("");try{let e=await fetch(v?"/api/songs/".concat(v):"/api/songs",{method:v?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to save song")}await H(m.page,T),X()}catch(e){I(e.message)}finally{F(!1)}},V=async e=>{if(confirm("Are you sure you want to delete this song?"))try{let s=await fetch("/api/songs/".concat(e),{method:"DELETE"});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to delete song")}await H(m.page,T)}catch(e){I(e.message)}},X=()=>{g(!1),f(null),b(r),I(""),L("default"),D(!1)};return(0,t.jsxs)("div",{className:"admin-dashboard-new ".concat("dark"===q?"dark-theme":""),children:[(0,t.jsxs)("aside",{className:"sidebar",children:[(0,t.jsx)("div",{className:"sidebar-header",children:(0,t.jsxs)("div",{className:"sidebar-logo",children:[(0,t.jsx)("div",{className:"logo-icon",children:(0,t.jsx)(i.FontAwesomeIcon,{icon:c.faMusic})}),(0,t.jsx)("span",{children:"Playly"})]})}),(0,t.jsx)("nav",{className:"sidebar-nav",children:(0,t.jsxs)("div",{className:"nav-section",children:[(0,t.jsx)("span",{className:"nav-label",children:"Menu"}),(0,t.jsxs)("a",{href:"#",className:"nav-item active",children:[(0,t.jsx)(i.FontAwesomeIcon,{icon:c.faHome}),(0,t.jsx)("span",{children:"Overview"})]}),(0,t.jsxs)("a",{href:"#",className:"nav-item",children:[(0,t.jsx)(i.FontAwesomeIcon,{icon:c.faCompactDisc}),(0,t.jsx)("span",{children:"Music Library"})]}),(0,t.jsxs)("a",{href:"#",className:"nav-item",children:[(0,t.jsx)(i.FontAwesomeIcon,{icon:c.faUpload}),(0,t.jsx)("span",{children:"Upload"})]})]})}),(0,t.jsxs)("div",{className:"sidebar-footer",children:[(0,t.jsxs)("a",{href:"#",className:"nav-item",children:[(0,t.jsx)(i.FontAwesomeIcon,{icon:c.faGear}),(0,t.jsx)("span",{children:"Settings"})]}),(0,t.jsxs)("button",{className:"theme-toggle",onClick:()=>{J(e=>"light"===e?"dark":"light")},children:[(0,t.jsx)(i.FontAwesomeIcon,{icon:"light"===q?c.faMoon:c.faSun}),(0,t.jsx)("span",{children:"light"===q?"Dark Mode":"Light Mode"})]})]})]}),(0,t.jsxs)("div",{className:"main-content",children:[(0,t.jsxs)("header",{className:"dashboard-header",children:[(0,t.jsxs)("div",{className:"header-title",children:[(0,t.jsx)("h1",{children:"Admin Dashboard"}),(0,t.jsx)("p",{children:"Manage your music library"})]}),(0,t.jsx)("div",{className:"header-actions",children:(0,t.jsxs)("button",{className:"logout-btn",onClick:z,children:[(0,t.jsx)(i.FontAwesomeIcon,{icon:c.faSignOutAlt}),(0,t.jsx)("span",{children:"Logout"})]})})]}),(0,t.jsxs)("main",{className:"page-content",children:[(0,t.jsxs)("div",{className:"stats-row",children:[(0,t.jsxs)("div",{className:"stat-card",children:[(0,t.jsx)("div",{className:"stat-icon",children:(0,t.jsx)(i.FontAwesomeIcon,{icon:c.faMusic})}),(0,t.jsxs)("div",{className:"stat-info",children:[(0,t.jsx)("span",{className:"stat-value",children:m.total}),(0,t.jsx)("span",{className:"stat-label",children:"Total Songs"})]})]}),(0,t.jsxs)("div",{className:"stat-card",children:[(0,t.jsx)("div",{className:"stat-icon accent",children:(0,t.jsx)(i.FontAwesomeIcon,{icon:c.faCompactDisc})}),(0,t.jsxs)("div",{className:"stat-info",children:[(0,t.jsx)("span",{className:"stat-value",children:m.total>0?"Active":"Empty"}),(0,t.jsx)("span",{className:"stat-label",children:"Library Status"})]})]})]}),(0,t.jsx)("div",{className:"quick-action",children:(0,t.jsxs)("button",{className:"add-song-btn",onClick:()=>g(!0),children:[(0,t.jsx)(i.FontAwesomeIcon,{icon:c.faPlus}),(0,t.jsx)("span",{children:"Add New Song"})]})}),(0,t.jsxs)("div",{className:"table-section",children:[(0,t.jsxs)("div",{className:"table-header",children:[(0,t.jsx)("h3",{children:"Music Library"}),(0,t.jsxs)("div",{className:"table-controls",children:[(0,t.jsxs)("div",{className:"search-box",children:[(0,t.jsx)(i.FontAwesomeIcon,{icon:c.faSearch}),(0,t.jsx)("input",{type:"text",placeholder:"Search songs or artists...",value:_,onChange:e=>{var s;E(s=e.target.value),O.current&&clearTimeout(O.current),O.current=setTimeout(()=>{P(s),H(1,s)},300)}})]}),(0,t.jsxs)("span",{className:"song-count",children:[m.total," songs"]})]})]}),p?(0,t.jsx)("div",{className:"loading",children:(0,t.jsx)(i.FontAwesomeIcon,{icon:c.faSpinner,spin:!0,size:"2x"})}):0===d.length?(0,t.jsxs)("div",{className:"empty-state",children:[(0,t.jsx)(i.FontAwesomeIcon,{icon:c.faMusic,size:"2x"}),(0,t.jsx)("h4",{children:T?"No songs found":"No songs yet"}),(0,t.jsx)("p",{children:T?"Try a different search term":'Click "Add New Song" to get started'})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"table-container",children:(0,t.jsxs)("table",{className:"songs-table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Song Name"}),(0,t.jsx)("th",{children:"Artist"}),(0,t.jsx)("th",{children:"Status"}),(0,t.jsx)("th",{children:"Action"})]})}),(0,t.jsx)("tbody",{children:d.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)("div",{className:"song-cell",children:[(0,t.jsx)("img",{src:e.cover,alt:e.name,className:"song-thumb"}),(0,t.jsx)("span",{children:e.name})]})}),(0,t.jsx)("td",{children:e.artist}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:"status-badge active",children:"Active"})}),(0,t.jsx)("td",{children:(0,t.jsxs)("div",{className:"action-btns",children:[(0,t.jsxs)("button",{className:"action-btn edit",onClick:()=>{f(e.id),b({name:e.name,artist:e.artist,cover:e.cover,audio:e.audio,color:e.color}),L(l.some(s=>s.url===e.cover)?"default":"url"),g(!0)},children:[(0,t.jsx)(i.FontAwesomeIcon,{icon:c.faEdit})," Edit"]}),(0,t.jsxs)("button",{className:"action-btn delete",onClick:()=>V(e.id),children:[(0,t.jsx)(i.FontAwesomeIcon,{icon:c.faTrash})," Delete"]})]})})]},e.id))})]})}),m.totalPages>1&&(0,t.jsxs)("div",{className:"pagination",children:[(0,t.jsx)("button",{className:"pagination-btn",onClick:()=>K(m.page-1),disabled:m.page<=1,children:(0,t.jsx)(i.FontAwesomeIcon,{icon:c.faChevronLeft})}),(0,t.jsx)("div",{className:"pagination-info",children:(0,t.jsxs)("span",{children:["Page ",m.page," of ",m.totalPages]})}),(0,t.jsx)("button",{className:"pagination-btn",onClick:()=>K(m.page+1),disabled:m.page>=m.totalPages,children:(0,t.jsx)(i.FontAwesomeIcon,{icon:c.faChevronRight})})]})]})]})]})]}),j&&(0,t.jsx)("div",{className:"modal-overlay",onClick:X,children:(0,t.jsxs)("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"modal-header",children:[(0,t.jsx)("h2",{children:v?"Edit Song":"Add New Song"}),(0,t.jsx)("button",{className:"close-btn",onClick:X,children:(0,t.jsx)(i.FontAwesomeIcon,{icon:c.faTimes})})]}),(0,t.jsxs)("div",{className:"modal-body",children:[k&&(0,t.jsx)("div",{className:"error-msg",children:k}),(0,t.jsxs)("form",{onSubmit:G,children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"Song Name"}),(0,t.jsx)("input",{type:"text",value:N.name,onChange:e=>b((0,a._)((0,s._)({},N),{name:e.target.value})),placeholder:"Enter song name",required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"Artist"}),(0,t.jsx)("input",{type:"text",value:N.artist,onChange:e=>b((0,a._)((0,s._)({},N),{artist:e.target.value})),placeholder:"Enter artist name",required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"Cover Image"}),(0,t.jsxs)("div",{className:"cover-tabs",children:[(0,t.jsxs)("button",{type:"button",className:"cover-tab ".concat("default"===M?"active":""),onClick:()=>L("default"),children:[(0,t.jsx)(i.FontAwesomeIcon,{icon:c.faImage})," Default Images"]}),(0,t.jsxs)("button",{type:"button",className:"cover-tab ".concat("url"===M?"active":""),onClick:()=>L("url"),children:[(0,t.jsx)(i.FontAwesomeIcon,{icon:c.faLink})," Image URL"]})]}),"url"===M?(0,t.jsx)("input",{type:"url",value:N.cover,onChange:e=>b((0,a._)((0,s._)({},N),{cover:e.target.value})),placeholder:"https://...",required:"url"===M}):(0,t.jsxs)("div",{className:"cover-picker",children:[N.cover&&(0,t.jsxs)("div",{className:"selected-cover",children:[(0,t.jsx)("img",{src:N.cover,alt:"Selected cover"}),(0,t.jsx)("span",{children:"Selected"})]}),(0,t.jsx)("button",{type:"button",className:"choose-cover-btn",onClick:()=>D(!U),children:N.cover?"Change Image":"Choose Image"}),U&&(0,t.jsx)("div",{className:"cover-grid",children:l.map(e=>(0,t.jsxs)("div",{className:"cover-option ".concat(N.cover===e.url?"selected":""),onClick:()=>{var t;return t=e.url,void(b(e=>(0,a._)((0,s._)({},e),{cover:t})),D(!1))},children:[(0,t.jsx)("img",{src:e.url,alt:e.name}),N.cover===e.url&&(0,t.jsx)("div",{className:"cover-check",children:(0,t.jsx)(i.FontAwesomeIcon,{icon:c.faCheck})})]},e.id))})]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"Audio File"}),(0,t.jsx)("input",{type:"file",ref:R,accept:"audio/*",onChange:B,style:{display:"none"}}),(0,t.jsx)("div",{className:"upload-area ".concat(N.audio?"has-file":""," ").concat(w?"uploading":""),onClick:()=>{var e;return!w&&(null==(e=R.current)?void 0:e.click())},children:w?(0,t.jsxs)("div",{className:"upload-progress",children:[(0,t.jsx)("div",{className:"progress-bar",children:(0,t.jsx)("div",{className:"progress-fill",style:{width:"".concat(S,"%")}})}),(0,t.jsxs)("span",{children:["Uploading... ",S,"%"]})]}):N.audio?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.FontAwesomeIcon,{icon:c.faCheck})," Audio uploaded"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.FontAwesomeIcon,{icon:c.faUpload})," Click to upload audio"]})})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"Theme Colors"}),(0,t.jsxs)("div",{className:"color-inputs",children:[(0,t.jsxs)("div",{className:"color-input",children:[(0,t.jsx)("input",{type:"color",value:N.color[0],onChange:e=>b((0,a._)((0,s._)({},N),{color:[e.target.value,N.color[1]]}))}),(0,t.jsx)("input",{type:"text",value:N.color[0],onChange:e=>b((0,a._)((0,s._)({},N),{color:[e.target.value,N.color[1]]}))})]}),(0,t.jsxs)("div",{className:"color-input",children:[(0,t.jsx)("input",{type:"color",value:N.color[1],onChange:e=>b((0,a._)((0,s._)({},N),{color:[N.color[0],e.target.value]}))}),(0,t.jsx)("input",{type:"text",value:N.color[1],onChange:e=>b((0,a._)((0,s._)({},N),{color:[N.color[0],e.target.value]}))})]})]})]}),(0,t.jsx)("button",{type:"submit",className:"submit-btn",disabled:A||w||"default"===M&&!N.cover,children:A?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.FontAwesomeIcon,{icon:c.faSpinner,spin:!0})," Saving..."]}):(0,t.jsx)(t.Fragment,{children:v?"Update Song":"Add Song"})})]})]})]})})]})}e.s(["default",()=>d],28030)}]);